version: "~> 1.0"
sudo: true
dist: bionic
language: node_js
node_js:
  - 13
  - 12
  - 11
branches:
  only:
    - master
    - dev
env:
  - CODECOV_TOKEN=0e354bd2-c9a3-471f-a187-521a7ac7d713
cache: yarn
services:
  - docker
before_install:
  - docker-compose -f docker-compose.test.yml up -d
install:
  - yarn install
  - yarn global add codecov
  - yarn global add nyc
script:
  - yarn lint
  - yarn test
  - codecov
deploy:
  provider: npm
  email: paulosales@gmail.com
  api_key:
    secure: XCly8K4ZMCDlJmM7jeV9XCLfHwNElq9PRG7M+q7oRlpCWjNrP/wsHPTRuulIBCz4AeVOGfO3hIhYsUoMjimk34G5819NZVqcm4DsmNdktvM5FJ+Di2fJsUwLMFohkuhlAkEZfnMDpy4IOM+htFol/Z3cVSAl2FNqscG3yThV1Lv/Fy4+GYFQ8DZi+GtNUwRqnzxdjofP81YnYO5r8I91OEpHWamQFlK6eP3Cgbi0t3kW/3DFMGGnEmblcG40Cvx5r0FjsPBEqE0FC6FEUyMoh2VAwPiy/d/AUlt2QHyCPUsFZZj6gBV9RvqkaVLUHglaojYHsWYoD4Ids9e5IkEptjtAvd6IFMs1E1rUqteSer3SeLzx1GghrzZ3g2jQAqkx2MnbjEHGYFRKjJEMnEj31E9n3hjfwr9xZl7FEMvM69srym4D56eNsa6cOkAB7pVGrUW+6v1j2yGgHDg9R5Fc+2ojwGzHrnd55FWvyMDBRk3IpeYkV6s5FJSslKQmcetxCWq8ku+MV8Xt7IaMPEH7j2EXDun74t6zsxVll1jKaqb/xwNpn/5eOCxO+3ehmUDtvaEgp0eSAv+OQf2mQMMcLQajbVA6+on0EMsQlGSoCsXksq1NVkZ/hgiNJrcRK/S88EOj5gHIZAViadrlo7z5ZcnokUu1V2nNZsVyxsq0pCw=
  on:
    branch: master
    repo: paulosales/crimemap-sync-cli
